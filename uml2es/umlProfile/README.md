# UML Profile for MarkLogic Entity Services

## Intro
This folder contains the UML profile for MarkLogic Entity Services. The profile contains stereotypes. You apply stereotypes to your model, class, or attribute to affect how this toolkit's transform maps your UML model to MarkLLogic Entity Services format. 

When defining your UML model in your UML tool of choice, import this profile into the tool to allow you to stereotype your model with ES-specific stereotypes.

How to do this depends on which tool you choose. In MagicDraw, for example, with your model open, from File menu select Use Project. 

Here is a visual representation of the profile:

![Profile](magicdraw/profile.png)

## Reference
Stereotypes are organized into three sections: 
- **Core model**: These stereotypes (the pale yellow ones above) enhance your UML model with configuration to be included in the Entity Services model descriptor. An example is to designate a **rangeIndex** on a class attribute. If you include that stereotype in your UML model, the transform will include the range index in the Entity Services model descriptor. See [http://docs.marklogic.com/guide/entity-services/models] for a full reference to the descriptor.
- **Extended model**: These stereotypes (the blue ones above) enhance your UML model with configuration that **extends** the core model with **additional facts**. For example, the core model does not allow you to associate with a class a set of collections and permissions. But using the **xDocument** stereotype, you can make that association in the extended model. If you include that stereotype in your UML model, the transform will add a fact (expressed as a semantic triple) to the extended model indicating your collections and permissions. See [http://docs.marklogic.com/guide/entity-services/models#id_28304] for more on how facts can extend the model.
- **Semantics** - These stereotypes (the orange ones above) allow you to add semantic information to your model. Use this feature if you plan to use a multi-model database, consisting of not only documents but also semantic triples. The HR example from this toolkit showcases this feature. In that example, we have Employee and Department documents, but we also use semantic triples to express organizational relationships, such as employee reporting structure and employee membership in departments. The toolkit's transform module checks for the existence of semantic stereotypes in your model. If it finds any, it generates XQuery code to create semantic triples based on the information provided in your stereotypes. You can run that code at ingestion time to associate triples with your document (Think envelope pattern TODOO ... )

### Core
|Stereotype|Level|Tag|Mapping To Entity Services|
|---|---|---|---|
|esModel|Package|version|Entity Services model version|


### Extended

### Semantic



Additionally, a stereotype can be applied to a class, an attribute, or the entire model or package. 

The following chart describes:



TODO - reference
- in discussing FK : we intrepret ES local reference (#ref) as a way to tell instance coverter codegen to use containment rather than reference; our "FK" stereotype means reference; there is no TDE implication to this; TDE cares about PK, as this affects semantic triples generated by TDE
