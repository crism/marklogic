{"description":{"Model http://com.marklogic.es.uml.hr/HRModel-0.0.1 is stereotyped in the model as follows:":{"hasFunction":["doCalculation_Department_uri", "doCalculation_Employee_uri", "runWriter_Department", "runWriter_Employee"]}, "The model also has the specified mapping facts:":{"Mapping URI":"/xmi2es/excel-mapper/global-mapping.json", "Overall Mapping Source":"GlobalCorp HR Data", "Overall Mapping Notes":"CSV Files Containing Employee, Department, and Salary Data"}, "Comments below include discovery findings. See the full report at this URI:":"/xmi2es/discovery/global-mapping.json", "Employee":{"description":{"Class Employee is stereotyped in the model as follows:":{"collections":["Employee"]}, "The class also has the specified mapping facts":{"Mapping Source":["EmployeeTable.csv (Primary)", "SalaryTable.csv (Additional)"], "Mapping Notes":"Notice we map addresses inline. We could also have split them into a separate sheet. Inline makes more sense here. Same for phones and emails.", "Mapping Collections For Discovery":null, "Mapping URI Patterns For Discovery":null, "Mapping Sample Data For Discovery":null}, "Discovery found the following:":{"Documents whose structure resembles the model":[{"doc":"/hr/salary/global/31.json", "numMatches":7}, {"doc":"/hr/salary/global/329.json", "numMatches":7}, {"doc":"/hr/salary/global/818.json", "numMatches":7}, {"doc":"/hr/salary/global/800.json", "numMatches":7}], "Possible collections":["Employee", "LoadEmployee"], "Possible URIs":["/hr/employee/global/171.json", "/hr/employee/global/270.json", "/hr/employee/global/370.json", "/hr/employee/global/56.json", "/hr/employee/global/690.json", "/hr/employee/global/712.json", "/hr/employee/global/884.json"]}}, "attributes":{"addresses":{"Attribute addresses is stereotyped in the model as follows:":{"reference":["http://com.marklogic.es.uml.hr/HRModel-0.0.1/Address"], "relationship":["shared"], "resolvedType":["#/definitions/Address"], "typeIsReference":["true"]}, "The attribute also has the specified mapping facts:":[{"Model Path":"addresses.addressType", "Source Mapping":"\"Primary\"", "Mapping Attribute Notes":"constant", "Mapping Attribute Sample Data For Discovery":null, "Mapping Attribute AKA For Discovery":null}, {"Model Path":"addresses.city", "Source Mapping":"city", "Mapping Attribute Notes":"EmployeeTable", "Mapping Attribute Sample Data For Discovery":null, "Mapping Attribute AKA For Discovery":null}, {"Model Path":"addresses.country", "Source Mapping":"\"USA\"", "Mapping Attribute Notes":"constant", "Mapping Attribute Sample Data For Discovery":null, "Mapping Attribute AKA For Discovery":null}, {"Model Path":"addresses.geoCoordinates.latitute", "Source Mapping":"latitude", "Mapping Attribute Notes":"EmployeeTable", "Mapping Attribute Sample Data For Discovery":null, "Mapping Attribute AKA For Discovery":null}, {"Model Path":"addresses.geoCoordinates.longitude", "Source Mapping":"longitude", "Mapping Attribute Notes":"EmployeeTable", "Mapping Attribute Sample Data For Discovery":null, "Mapping Attribute AKA For Discovery":null}, {"Model Path":"addresses.lines", "Source Mapping":"addr1, addr2", "Mapping Attribute Notes":"EmployeeTable, array", "Mapping Attribute Sample Data For Discovery":null, "Mapping Attribute AKA For Discovery":null}, {"Model Path":"addresses.state", "Source Mapping":"states", "Mapping Attribute Notes":"EmployeeTable", "Mapping Attribute Sample Data For Discovery":null, "Mapping Attribute AKA For Discovery":null}, {"Model Path":"addresses.zip", "Source Mapping":"zip", "Mapping Attribute Notes":"EmployeeTable", "Mapping Attribute Sample Data For Discovery":null, "Mapping Attribute AKA For Discovery":null}], "Discovery found the following:":{"Similar to physical attribute in candidate document":[], "Similar to physical predicate in candidate document":[]}}, "firstName":{"Attribute firstName is stereotyped in the model as follows:":{"resolvedType":["string"]}, "The attribute also has the specified mapping facts:":[{"Model Path":"firstName", "Source Mapping":"first_name", "Mapping Attribute Notes":"EmployeeTable", "Mapping Attribute Sample Data For Discovery":"Larry", "Mapping Attribute AKA For Discovery":null}], "Discovery found the following:":{"Similar to physical attribute in candidate document":[{"document":"/hr/employee/global/692.json", "physicalName":"first_name"}, {"document":"/hr/employee/global/65.json", "physicalName":"first_name"}, {"document":"/hr/employee/global/665.json", "physicalName":"first_name"}, {"document":"/hr/employee/global/114.json", "physicalName":"first_name"}], "Similar to physical predicate in candidate document":[]}}, "bonus":{"Attribute bonus is stereotyped in the model as follows:":{"resolvedType":["float"]}, "The attribute also has the specified mapping facts:":[{"Model Path":"bonus", "Source Mapping":"bonus from salary", "Mapping Attribute Notes":"SalaryTable", "Mapping Attribute Sample Data For Discovery":null, "Mapping Attribute AKA For Discovery":null}], "Discovery found the following:":{"Similar to physical attribute in candidate document":[{"document":"/hr/salary/global/645.json", "physicalName":"bonus"}, {"document":"/hr/salary/global/863.json", "physicalName":"bonus"}, {"document":"/hr/salary/global/800.json", "physicalName":"bonus"}, {"document":"/hr/salary/global/937.json", "physicalName":"bonus"}], "Similar to physical predicate in candidate document":[]}}, "dateOfBirth":{"Attribute dateOfBirth is stereotyped in the model as follows:":{"resolvedType":["date"]}}, "effectiveDate":{"Attribute effectiveDate is stereotyped in the model as follows:":{"resolvedType":["date"]}, "The attribute also has the specified mapping facts:":[{"Model Path":"effectiveDate", "Source Mapping":"job_effective_date from salary", "Mapping Attribute Notes":"SalaryTable, date format", "Mapping Attribute Sample Data For Discovery":null, "Mapping Attribute AKA For Discovery":null}], "Discovery found the following:":{"Similar to physical attribute in candidate document":[], "Similar to physical predicate in candidate document":[]}}, "emails":{"Attribute emails is stereotyped in the model as follows:":{"reference":["http://com.marklogic.es.uml.hr/HRModel-0.0.1/Email"], "relationship":["shared"], "resolvedType":["#/definitions/Email"], "typeIsReference":["true"]}, "The attribute also has the specified mapping facts:":[{"Model Path":"emails.emailAddress", "Source Mapping":"home_email, work_email", "Mapping Attribute Notes":"EmployeeTable, 2", "Mapping Attribute Sample Data For Discovery":null, "Mapping Attribute AKA For Discovery":null}], "Discovery found the following:":{"Similar to physical attribute in candidate document":[], "Similar to physical predicate in candidate document":[]}}, "employeeId":{"Attribute employeeId is stereotyped in the model as follows:":{"resolvedType":["string"]}, "The attribute also has the specified mapping facts:":[{"Model Path":"employeeId", "Source Mapping":"emp_id", "Mapping Attribute Notes":"EmployeeTable", "Mapping Attribute Sample Data For Discovery":null, "Mapping Attribute AKA For Discovery":null}], "Discovery found the following:":{"Similar to physical attribute in candidate document":[], "Similar to physical predicate in candidate document":[]}}, "baseSalary":{"Attribute baseSalary is stereotyped in the model as follows:":{"resolvedType":["float"]}, "The attribute also has the specified mapping facts:":[{"Model Path":"baseSalary", "Source Mapping":"base_salary from salary", "Mapping Attribute Notes":"SalaryTable", "Mapping Attribute Sample Data For Discovery":null, "Mapping Attribute AKA For Discovery":null}], "Discovery found the following:":{"Similar to physical attribute in candidate document":[{"document":"/hr/salary/global/234.json", "physicalName":"base_salary"}, {"document":"/hr/salary/global/33.json", "physicalName":"base_salary"}, {"document":"/hr/salary/global/720.json", "physicalName":"base_salary"}, {"document":"/hr/salary/global/465.json", "physicalName":"base_salary"}], "Similar to physical predicate in candidate document":[]}}, "hireDate":{"Attribute hireDate is stereotyped in the model as follows:":{"resolvedType":["date"]}, "The attribute also has the specified mapping facts:":[{"Model Path":"hireDate", "Source Mapping":"hire_date", "Mapping Attribute Notes":"EmployeeTable", "Mapping Attribute Sample Data For Discovery":null, "Mapping Attribute AKA For Discovery":null}], "Discovery found the following:":{"Similar to physical attribute in candidate document":[{"document":"/hr/employee/global/697.json", "physicalName":"hire_date"}, {"document":"/hr/employee/global/640.json", "physicalName":"hire_date"}, {"document":"/hr/employee/global/835.json", "physicalName":"hire_date"}, {"document":"/hr/employee/global/399.json", "physicalName":"hire_date"}], "Similar to physical predicate in candidate document":[]}}, "lastName":{"Attribute lastName is stereotyped in the model as follows:":{"resolvedType":["string"]}, "The attribute also has the specified mapping facts:":[{"Model Path":"lastName", "Source Mapping":"last_name", "Mapping Attribute Notes":"EmployeeTable", "Mapping Attribute Sample Data For Discovery":"Fields", "Mapping Attribute AKA For Discovery":null}], "Discovery found the following:":{"Similar to physical attribute in candidate document":[{"document":"/hr/employee/global/399.json", "physicalName":"last_name"}, {"document":"/hr/employee/global/809.json", "physicalName":"last_name"}, {"document":"/hr/employee/global/898.json", "physicalName":"last_name"}, {"document":"/hr/employee/global/708.json", "physicalName":"last_name"}], "Similar to physical predicate in candidate document":[]}}, "memberOf":{"Attribute memberOf is stereotyped in the model as follows:":{"reference":["http://com.marklogic.es.uml.hr/HRModel-0.0.1/Department"], "relationship":["association"], "resolvedType":["int"], "typeIsReference":["true"]}, "The attribute also has the specified mapping facts:":[{"Model Path":"memberOf", "Source Mapping":"dept_num", "Mapping Attribute Notes":["EmployeeTable", "Make IRI based on this"], "Mapping Attribute Sample Data For Discovery":null, "Mapping Attribute AKA For Discovery":null}], "Discovery found the following:":{"Similar to physical attribute in candidate document":[], "Similar to physical predicate in candidate document":[]}}, "phones":{"Attribute phones is stereotyped in the model as follows:":{"reference":["http://com.marklogic.es.uml.hr/HRModel-0.0.1/Phone"], "relationship":["shared"], "resolvedType":["#/definitions/Phone"], "typeIsReference":["true"]}, "The attribute also has the specified mapping facts:":[{"Model Path":"phones.phoneType", "Source Mapping":"\"home\", \"mobile\", \"pager\" ,\"work\"", "Mapping Attribute Notes":"constant, 4", "Mapping Attribute Sample Data For Discovery":null, "Mapping Attribute AKA For Discovery":null}, {"Model Path":"phones.phoneValue", "Source Mapping":"home_phone, mobile, pager, work_phone", "Mapping Attribute Notes":"EmployeeTable, 4", "Mapping Attribute Sample Data For Discovery":null, "Mapping Attribute AKA For Discovery":null}], "Discovery found the following:":{"Similar to physical attribute in candidate document":[], "Similar to physical predicate in candidate document":[]}}, "reportsTo":{"Attribute reportsTo is stereotyped in the model as follows:":{"reference":["http://com.marklogic.es.uml.hr/HRModel-0.0.1/Employee"], "relationship":["association"], "resolvedType":["string"], "typeIsReference":["true"]}, "The attribute also has the specified mapping facts:":[{"Model Path":"reportsTo", "Source Mapping":"reports_to", "Mapping Attribute Notes":["EmployeeTable", "Make IRI based on this"], "Mapping Attribute Sample Data For Discovery":null, "Mapping Attribute AKA For Discovery":null}], "Discovery found the following:":{"Similar to physical attribute in candidate document":[{"document":"/hr/employee/global/258.json", "physicalName":"reports_to"}, {"document":"/hr/employee/global/708.json", "physicalName":"reports_to"}, {"document":"/hr/employee/global/997.json", "physicalName":"reports_to"}, {"document":"/hr/employee/global/692.json", "physicalName":"reports_to"}], "Similar to physical predicate in candidate document":[]}}, "status":{"Attribute status is stereotyped in the model as follows:":{"resolvedType":["string"]}, "The attribute also has the specified mapping facts:":[{"Model Path":"status", "Source Mapping":"status from salary", "Mapping Attribute Notes":"SalaryTable", "Mapping Attribute Sample Data For Discovery":null, "Mapping Attribute AKA For Discovery":null}], "Discovery found the following:":{"Similar to physical attribute in candidate document":[{"document":"/hr/salary/global/818.json", "physicalName":"status"}, {"document":"/hr/salary/global/455.json", "physicalName":"status"}, {"document":"/hr/salary/global/800.json", "physicalName":"status"}, {"document":"/hr/salary/global/33.json", "physicalName":"status"}], "Similar to physical predicate in candidate document":[]}}, "uri":{"Attribute uri is stereotyped in the model as follows:":{"basedOnAttribute":["employeeId"], "calculation":[["\"/employee/\"", "$attribute(employeeId)", "\".json\""]], "isURI":["true"], "resolvedType":["string"]}}}}, "Address":{"description":{"Class Address is stereotyped in the model as follows:":{}}, "attributes":{"addressType":{"Attribute addressType is stereotyped in the model as follows:":{"resolvedType":["string"]}}, "city":{"Attribute city is stereotyped in the model as follows:":{"resolvedType":["string"]}}, "country":{"Attribute country is stereotyped in the model as follows:":{"resolvedType":["string"]}}, "lines":{"Attribute lines is stereotyped in the model as follows:":{"resolvedType":["string"]}}, "state":{"Attribute state is stereotyped in the model as follows:":{"resolvedType":["string"]}}, "zip":{"Attribute zip is stereotyped in the model as follows:":{"resolvedType":["string"]}}}}, "Email":{"description":{"Class Email is stereotyped in the model as follows:":{}}, "attributes":{"emailAddress":{"Attribute emailAddress is stereotyped in the model as follows:":{"resolvedType":["string"]}}, "emailType":{"Attribute emailType is stereotyped in the model as follows:":{"resolvedType":["string"]}}}}, "Phone":{"description":{"Class Phone is stereotyped in the model as follows:":{}}, "attributes":{"phoneNumber":{"Attribute phoneNumber is stereotyped in the model as follows:":{"resolvedType":["string"]}}, "phoneType":{"Attribute phoneType is stereotyped in the model as follows:":{"resolvedType":["string"]}}}}}, "modules":{"functionLibraries":["/xmi2es/dm.sjs"]}, "input":{"format":"json"}, "outputs":{"main":{"format":"json", "variables":{"employeeId":"[[ extract('//TODO') ]]", "uri":"xcalc('EmployeeHubModel', 'Employee', 'uri', 'content'  , 'employeeId', '@employeeId', 'content' )"}, "content":[{"addresses":["%%[[ extract('//LOOPCOUNTER') ]]", {"addressType":"[[ extract('//TODO') ]]", "city":"[[ extract('//TODO') ]]", "country":"[[ extract('//TODO') ]]", "lines":"[[ extract('//TODO') ]]", "state":"[[ extract('//TODO') ]]", "zip":"[[ extract('//TODO') ]]"}], "firstName":"[[ extract('//TODO') ]]", "bonus":"[[ extract('//TODO') ]]", "dateOfBirth":"[[ extract('//TODO') ]]", "effectiveDate":"[[ extract('//TODO') ]]", "emails":["%%[[ extract('//LOOPCOUNTER') ]]", {"emailAddress":"[[ extract('//TODO') ]]", "emailType":"[[ extract('//TODO') ]]"}], "employeeId":"[[ $employeeId ]]", "baseSalary":"[[ extract('//TODO') ]]", "hireDate":"[[ extract('//TODO') ]]", "lastName":"[[ extract('//TODO') ]]", "memberOf":"[[ extract('//TODO') ]]", "phones":["%%[[ extract('//LOOPCOUNTER') ]]", {"phoneNumber":"[[ extract('//TODO') ]]", "phoneType":"[[ extract('//TODO') ]]"}], "reportsTo":"[[ extract('//TODO') ]]", "status":"[[ extract('//TODO') ]]", "uri":"[[ $uri ]]"}, {}]}}}